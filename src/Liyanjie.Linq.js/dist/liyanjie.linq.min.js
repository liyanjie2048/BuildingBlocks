!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(((t=t||self).liyanjie=t.liyanjie||{},t.liyanjie.linq={}))}(this,function(t){"use strict";var n=function(t,r){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function u(t,r){function e(){this.constructor=t}n(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}function o(){for(var t=0,r=0,e=arguments.length;r<e;r++)t+=arguments[r].length;var n=Array(t),o=0;for(r=0;r<e;r++)for(var u=arguments[r],c=0,i=u.length;c<i;c++,o++)n[o]=u[c];return n}var c=function(){function l(t){l._check(t),this.source=t}return l._check=function(t){if(null==t||!Array.isArray(t))throw new Error("Array parameter can not be null or undefined!")},l.new=function(t){return new l(t||[])},l.from=function(t){return new l(t||[])},l.prototype.all=function(t){return this.every(t)},l.prototype.every=function(t){return!0===this.source.every(t)},l.prototype.any=function(t){return this.some(t)},l.prototype.some=function(t){return t?!0===this.source.some(t):0<this.source.length},l.prototype.append=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return l._check(r),(t=this.source).push.apply(t,r),this},l.prototype.average=function(t){return this.sum(t)/this.source.length},l.prototype.concat=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return l._check(r),new l((t=this.source).concat.apply(t,r))},l.prototype.contains=function(r,e){return e?!0===this.source.some(function(t){return e(t,r)}):-1<this.source.indexOf(r)},l.prototype.count=function(t){return t?this.source.filter(t).length:this.source.length},l.prototype.defaultIfEmpty=function(t){return this.isEmpty()?new l(t?[t]:[]):this},l.prototype.distinct=function(e){e=e||function(t,r){return t===r};var t=[];return this.source.forEach(function(r){!1===t.some(function(t){return e(t,r)})&&t.push(r)}),new l(t)},l.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:null},l.empty=function(){return new l([])},l.prototype.except=function(t,e){l._check(t),e=e||function(t,r){return t===r};var n=[];return this.source.forEach(function(r){!1===t.some(function(t){return e(t,r)})&&n.push(r)}),new l(n)},l.prototype.firstOrDefault=function(t){var r=t?this.source.filter(t):this.source;return 0<r.length?r[0]:null},l.prototype.forEach=function(t){this.source.forEach(t)},l.prototype.groupBy=function(n,o){o=o||function(t,r){return t===r};var u=[];return this.source.forEach(function(t){var r=n(t),e=u.filter(function(t){return o(t.key,r)});0<e.length?e[0].source.push(t):u.push(new i({key:r,source:[t]}))}),new l(u)},l.prototype.groupJoin=function(u,c,i,s,f){l._check(u),f=f||function(t,r){return t===r};for(var h=[],t=function(t){var r=p.source[t],e=c(r),n=u.filter(function(t){return f(e,i(t))}),o=s(r,n,e);o&&h.push(o)},p=this,r=0;r<this.source.length;r++)t(r);return new l(h)},l.prototype.intersect=function(t,e){l._check(t),e=e||function(t,r){return t===r};var n=[];return this.source.forEach(function(r){!0===t.some(function(t){return e(t,r)})&&n.push(r)}),new l(n)},l.prototype.isEmpty=function(){return 0===this.source.length},l.prototype.join=function(c,i,s,f,h){l._check(c),h=h||function(t,r){return t===r};for(var p=[],t=function(t){var r=a.source[t],e=i(r),n=c.filter(function(t){return h(e,s(t))}),o=0<n.length?n[0]:null,u=f(r,o,e);u&&p.push(u)},a=this,r=0;r<this.source.length;r++)t(r);return new l(p)},l.prototype.lastOrDefault=function(t){t?this.source.filter(t):this.source;return 0<this.source.length?this.source[this.source.length-1]:null},l.prototype.max=function(e){return 0===this.source.length?0:e(this.source.sort(function(t,r){return e(r)-e(t)})[0])},l.prototype.min=function(e){return 0===this.source.length?0:e(this.source.sort(function(t,r){return e(t)-e(r)})[0])},l.prototype.orderBy=function(t,r){return this.__orderBy(t,!1,r)},l.prototype.orderByDescending=function(t,r){return this.__orderBy(t,!0,r)},l.prototype.__orderBy=function(n,t,o){o=o||function(t,r){return t===r};var u=[],c=[];this.source.forEach(function(t){var r=n(t);u.indexOf(r)<0&&u.push(r);var e=c.filter(function(t){return o(t.key,r)});0<e.length?e[0].source.push(t):c.push({key:r,source:[t]})}),u=u.sort(),t&&(u=u.reverse());var e=[];return u.forEach(function(r){e.push(new i(c.filter(function(t){return o(r,t.key)})[0]))}),c=u=null,new r(e)},l.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return l._check(t),this.source=new(Array.bind.apply(Array,o([void 0],t,this.source))),this},l.range=function(t,r){for(var e=[],n=0;n<r;n++)e.push(t+n);return new s(e)},l.repeat=function(t,r){for(var e=[],n=0;n<r;n++)e.push(t);return new l(e)},l.prototype.reverse=function(){return new l((new(Array.bind.apply(Array,o([void 0],this.source)))).reverse())},l.prototype.select=function(n){var o=[];return this.source.forEach(function(t,r){var e=n(t,r);e&&o.push(e)}),new l(o)},l.prototype.selectMany=function(n){var o=[];return this.source.forEach(function(t,r){var e=n(t,r);e&&o.push.apply(o,e)}),new l(o)},l.prototype.sequenceEqual=function(t,r){if(l._check(t),this.source.length!==t.length)return!1;r=r||function(t,r){return t===r};for(var e=!0,n=0;n<this.source.length;n++){if(!r(this.source[n],t.length>n?t[n]:null)){e=!1;break}}return r=null,e},l.prototype.skip=function(e){var n=[];return this.source.forEach(function(t,r){e<=r&&n.push(t)}),new l(n)},l.prototype.skipWhile=function(e){for(var n=[],t=!1,r=0;r<this.source.length;r++){var o=this.source[r];if(e(o,r)){if(t)break}else t||(t=!0),n.push(o)}return this.source.forEach(function(t,r){e(t,r)||n.push(t)}),new l(n)},l.prototype.sum=function(r){if(0===this.source.length)return 0;var e=0;return this.source.forEach(function(t){e+=r(t)}),e},l.prototype.take=function(e){var n=[];return this.source.forEach(function(t,r){r<e&&n.push(t)}),new l(n)},l.prototype.takeWhile=function(t){for(var r=[],e=!1,n=0;n<this.source.length;n++){var o=this.source[n];if(t(o,n))e||(e=!0),r.push(o);else if(e)break}return new l(r)},l.prototype.toArray=function(){return this.source},l.prototype.toDictionary=function(e,n){var o={};return this.source.forEach(function(t){var r=e(t);o[r]||(o[r]=n(t))}),o},l.prototype.toString=function(r,e){null==r&&(r=","),e=e||function(t){return t.toString()};var n="";return this.source.forEach(function(t){n+=e(t)+r}),n.substr(0,n.length-r.length)},l.prototype.union=function(t,e){l._check(t),e=e||function(t,r){return t===r};var n=new(Array.bind.apply(Array,o([void 0],this.source)));return t.forEach(function(r){!1===n.some(function(t){return e(r,t)})&&n.push(r)}),e=null,new l(n)},l.prototype.where=function(e){var n=[];return this.source.forEach(function(t,r){e(t,r)&&n.push(t)}),new l(n)},l.prototype.zip=function(t,r){l._check(t);for(var e=[],n=0;n<this.source.length;n++){var o=this.source[n],u=t.length>n?t[n]:null;e.push(r(o,u,n))}return new l(e)},l}(),i=function(e){function t(t){var r=e.call(this,t.source)||this;return r.key=t.key,r}return u(t,e),t}(c),s=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return u(r,t),r.prototype.average=function(){return this.sum()/this.source.length},r.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:0},r.prototype.firstOrDefault=function(t){return 0<this.source.length?this.source[0]:0},r.prototype.lastOrDefault=function(t){return 0<this.source.length?this.source[this.source.length-1]:0},r.prototype.max=function(){return 0===this.source.length?0:this.source.sort(function(t,r){return r-t})[0]},r.prototype.min=function(){return 0===this.source.length?0:this.source.sort(function(t,r){return t-r})[0]},r.prototype.sum=function(){if(0===this.source.length)return 0;var r=0;return this.source.forEach(function(t){r+=t}),r},r}(c),r=function(e){function o(t){var r=e.call(this,c.new(t).selectMany(function(t){return t.source}).toArray())||this;return r.groupedSource=t,r}return u(o,e),o.prototype.thenBy=function(t,e){e=e||function(t,r){return t===r};var n=[];return this.groupedSource.forEach(function(r){r.orderBy(t,e).groupedSource.forEach(function(t){n.push(new i({key:r.key+":"+t.key,source:t.source}))})}),new o(n)},o.prototype.thenByDescending=function(t,r,e){e=e||function(t,r){return t===r};var n=[];return this.groupedSource.forEach(function(r){r.orderByDescending(t,e).groupedSource.forEach(function(t){n.push(new i({key:r.key+":"+t.key,source:t.source}))})}),new o(n)},o}(c);t.Enumerable=c,t.GroupedEnumerable=i,t.NumberEnumerable=s,t.OrderedEnumerable=r,Object.defineProperty(t,"__esModule",{value:!0})});