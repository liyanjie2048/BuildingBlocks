!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(((t=t||self).liyanjie=t.liyanjie||{},t.liyanjie.linq={}))}(this,function(t){"use strict";var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])})(t,r)};function o(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function u(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;var e=Array(t),o=0;for(r=0;r<n;r++)for(var u=arguments[r],i=0,c=u.length;i<c;i++,o++)e[o]=u[i];return e}var i=function(){function l(t){l._check(t),this.source=t}return l._check=function(t){if(null==t||!Array.isArray(t))throw new Error("Array parameter can not be null or undefined!")},l.new=function(t){return new l(t||[])},l.from=function(t){return new l(t||[])},l.prototype.all=function(t){return this.every(t)},l.prototype.every=function(t){return!0===this.source.every(t)},l.prototype.any=function(t){return this.some(t)},l.prototype.some=function(t){return t?!0===this.source.some(t):0<this.source.length},l.prototype.append=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return l._check(r),(t=this.source).push.apply(t,r),this},l.prototype.average=function(t){return this.sum(t)/this.source.length},l.prototype.concat=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return l._check(r),new l((t=this.source).concat.apply(t,r))},l.prototype.contains=function(r,n){return n?!0===this.source.some(function(t){return n(t,r)}):-1<this.source.indexOf(r)},l.prototype.count=function(t){return t?this.source.filter(t).length:this.source.length},l.prototype.defaultIfEmpty=function(t){return this.isEmpty()?new l(t?[t]:[]):this},l.prototype.distinct=function(n){n=n||function(t,r){return t===r};var t=[];return this.source.forEach(function(r){!1===t.some(function(t){return n(t,r)})&&t.push(r)}),new l(t)},l.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:null},l.empty=function(){return new l([])},l.prototype.except=function(t,n){l._check(t),n=n||function(t,r){return t===r};var e=[];return this.source.forEach(function(r){!1===t.some(function(t){return n(t,r)})&&e.push(r)}),new l(e)},l.prototype.firstOrDefault=function(t){var r=t?this.source.filter(t):this.source;return 0<r.length?r[0]:null},l.prototype.forEach=function(t){this.source.forEach(t)},l.prototype.groupBy=function(e,o){o=o||function(t,r){return t===r};var u=[];return this.source.forEach(function(t){var r=e(t),n=u.filter(function(t){return o(t.key,r)});0<n.length?n[0].source.push(t):u.push(new c({key:r,source:[t]}))}),new l(u)},l.prototype.groupJoin=function(u,i,c,s,h){l._check(u),h=h||function(t,r){return t===r};for(var f=[],t=function(t){var r=p.source[t],n=i(r),e=u.filter(function(t){return h(n,c(t))}),o=s(r,e,n);o&&f.push(o)},p=this,r=0;r<this.source.length;r++)t(r);return new l(f)},l.prototype.intersect=function(t,n){l._check(t),n=n||function(t,r){return t===r};var e=[];return this.source.forEach(function(r){!0===t.some(function(t){return n(t,r)})&&e.push(r)}),new l(e)},l.prototype.isEmpty=function(){return 0===this.source.length},l.prototype.join=function(i,c,s,h,f){l._check(i),f=f||function(t,r){return t===r};for(var p=[],t=function(t){var r=a.source[t],n=c(r),e=i.filter(function(t){return f(n,s(t))}),o=0<e.length?e[0]:null,u=h(r,o,n);u&&p.push(u)},a=this,r=0;r<this.source.length;r++)t(r);return new l(p)},l.prototype.lastOrDefault=function(t){t?this.source.filter(t):this.source;return 0<this.source.length?this.source[this.source.length-1]:null},l.prototype.max=function(n){return 0===this.source.length?0:n(this.source.sort(function(t,r){return n(r)-n(t)})[0])},l.prototype.min=function(n){return 0===this.source.length?0:n(this.source.sort(function(t,r){return n(t)-n(r)})[0])},l.prototype.orderBy=function(t,r,n){return this.__orderBy(t,!1,r,n)},l.prototype.orderByDescending=function(t,r,n){return this.__orderBy(t,!0,r,n)},l.prototype.__orderBy=function(e,t,r,o){o=o||function(t,r){return t===r};var u=[],i=[];this.source.forEach(function(t){var r=e(t);u.indexOf(r)<0&&u.push(r);var n=i.filter(function(t){return o(t.key,r)});0<n.length?n[0].source.push(t):i.push({key:r,source:[t]})}),u=r?u.sort(r):u.sort(),t&&(u=u.reverse());var n=[];return u.forEach(function(r){n.push(new c(i.filter(function(t){return o(r,t.key)})[0]))}),i=u=null,new h(n)},l.prototype.prepend=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return l._check(t),this.source=new(Array.bind.apply(Array,u([void 0],t,this.source))),this},l.range=function(t,r){for(var n=[],e=0;e<r;e++)n.push(t+e);return new s(n)},l.repeat=function(t,r){for(var n=[],e=0;e<r;e++)n.push(t);return new l(n)},l.prototype.reverse=function(){return new l((new(Array.bind.apply(Array,u([void 0],this.source)))).reverse())},l.prototype.select=function(e){var o=[];return this.source.forEach(function(t,r){var n=e(t,r);n&&o.push(n)}),new l(o)},l.prototype.selectMany=function(e){var o=[];return this.source.forEach(function(t,r){var n=e(t,r);n&&o.push.apply(o,n)}),new l(o)},l.prototype.sequenceEqual=function(t,r){if(l._check(t),this.source.length!==t.length)return!1;r=r||function(t,r){return t===r};for(var n=!0,e=0;e<this.source.length;e++){if(!r(this.source[e],t.length>e?t[e]:null)){n=!1;break}}return r=null,n},l.prototype.skip=function(n){var e=[];return this.source.forEach(function(t,r){n<=r&&e.push(t)}),new l(e)},l.prototype.skipWhile=function(n){for(var e=[],t=!1,r=0;r<this.source.length;r++){var o=this.source[r];if(n(o,r)){if(t)break}else t||(t=!0),e.push(o)}return this.source.forEach(function(t,r){n(t,r)||e.push(t)}),new l(e)},l.prototype.sum=function(r){if(0===this.source.length)return 0;var n=0;return this.source.forEach(function(t){n+=r(t)}),n},l.prototype.take=function(n){var e=[];return this.source.forEach(function(t,r){r<n&&e.push(t)}),new l(e)},l.prototype.takeWhile=function(t){for(var r=[],n=!1,e=0;e<this.source.length;e++){var o=this.source[e];if(t(o,e))n||(n=!0),r.push(o);else if(n)break}return new l(r)},l.prototype.toArray=function(){return this.source},l.prototype.toDictionary=function(n,e){var o={};return this.source.forEach(function(t){var r=n(t);o[r]||(o[r]=e(t))}),o},l.prototype.toString=function(r,n){null==r&&(r=","),n=n||function(t){return t.toString()};var e="";return this.source.forEach(function(t){e+=n(t)+r}),e.substr(0,e.length-r.length)},l.prototype.union=function(t,n){l._check(t),n=n||function(t,r){return t===r};var e=new(Array.bind.apply(Array,u([void 0],this.source)));return t.forEach(function(r){!1===e.some(function(t){return n(r,t)})&&e.push(r)}),n=null,new l(e)},l.prototype.where=function(n){var e=[];return this.source.forEach(function(t,r){n(t,r)&&e.push(t)}),new l(e)},l.prototype.zip=function(t,r){l._check(t);for(var n=[],e=0;e<this.source.length;e++){var o=this.source[e],u=t.length>e?t[e]:null;n.push(r(o,u,e))}return new l(n)},l}(),c=function(n){function t(t){var r=n.call(this,t.source)||this;return r.key=t.key,r}return o(t,n),t}(i),s=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return o(r,t),r.prototype.average=function(){return this.sum()/this.source.length},r.prototype.elementAtOrDefault=function(t){return this.source.length>t?this.source[t]:0},r.prototype.firstOrDefault=function(t){return 0<this.source.length?this.source[0]:0},r.prototype.lastOrDefault=function(t){return 0<this.source.length?this.source[this.source.length-1]:0},r.prototype.max=function(){return 0===this.source.length?0:this.source.sort(function(t,r){return r-t})[0]},r.prototype.min=function(){return 0===this.source.length?0:this.source.sort(function(t,r){return t-r})[0]},r.prototype.sum=function(){if(0===this.source.length)return 0;var r=0;return this.source.forEach(function(t){r+=t}),r},r}(i),h=function(n){function r(t){var r=n.call(this,i.new(t).selectMany(function(t){return t.source}).toArray())||this;return r.groupedSource=t,r}return o(r,n),r.prototype.thenBy=function(t,r,n){return this.__thenBy(t,!1,r,n)},r.prototype.thenByDescending=function(t,r,n){return this.__thenBy(t,!0,r,n)},r.prototype.__thenBy=function(t,n,e,o){o=o||function(t,r){return t===r};var u=[];return this.groupedSource.forEach(function(r){(n?r.orderByDescending(t,e,o):r.orderBy(t,e,o)).groupedSource.forEach(function(t){u.push(new c({key:r.key+":"+t.key,source:t.source}))})}),new r(u)},r}(i);t.Enumerable=i,t.GroupedEnumerable=c,t.NumberEnumerable=s,t.OrderedEnumerable=h,Object.defineProperty(t,"__esModule",{value:!0})});